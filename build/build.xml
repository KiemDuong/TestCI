<?XML Version = "1.0" encoding = "UTF-8" ?> 
< Project name = "Build_Android" Default = "main" basedir = "." > 
  < property environment = "env" /> 
  < property name = "RAW_BUILD_NUMBER " value = "$ {env.BUILD_NUMBER}" /> 
  < script Language = "JavaScript" > <! [CDATA [
    var buildNum = parseInt (project.getProperty ("RAW_BUILD_NUMBER"))
    var minorBuildNumber = buildNum% 100;
    var majorBuildNumber = (Math.floor (buildNum / 100))% 100;
    var uberBuildNumber = (Math.floor (buildNum / 10000))% 100;
    project.setProperty ("minorBuildNumber", minorBuildNumber);
    project.setProperty ("majorBuildNumber", majorBuildNumber);
    project.setProperty ("uberBuildNumber", uberBuildNumber);
  ]]> </ script > 
  < property name = "VERSION_STRING" value = "$ {uberBuildNumber}. $ {majorBuildNumber}. $ {minorBuildNumber}" /> 
  < property file = "settings.properties" /> 
  < property name = " dev.dir.absolute " Location = "$ {dev.dir}" /> 
  < tstamp > 
    < format property = "TODAY_STAMP" pattern = "YYYY_MM_DD" locale = "en, U.S." /> 
  </ tstamp > 
  < tstamp > 
    < format property = "MONTH_STAMP" pattern = "M" locale = "en, U.S." /> 
  </ tstamp > 
  < property name = "VERSION_NUM" value = "$ {uberBuildNumber}. $ {majorBuildNumber}. $ {minorBuildNumber}" / > 
  < property name = "VERSION_STRING" value = "$ {VERSION_NUM honorbound_}" />
  
  < target name = "main" depends = "Android"  />
  
  < target name = "Android" depends = "compile-Android"  />
  
  < target name = "clean" > 
    < echo Message = "Cleaning Build Space" /> 
    < delete dir = "$ {build.dir}" /> 
    < mkdir dir = "$ {build.dir}" /> 
  </ target >
  
  < target name = "compile-Android" depends = "clean" >
    
    < echo Message = "Compiling Unity Project for Android Version $ {VERSION_STRING}" />
    
    
    < echo Message = "$ {unity.bin}-projectpath $ {dev.dir.absolute}-executeMethod PerformBuild.CommandLineBuildAndroid-batchmode-quit" /> 
    < Exec Executable = "$ {unity.bin}" failonerror = "true" > 
      < Arg line = "$ {dev.dir.absolute-projectpath}" /> 
      < Arg line = "-executeMethod PerformBuild.CommandLineBuildAndroid" /> 
      < Arg line = "-batchmode" /> 
      < Arg line = "-quit" /> 
    </ Exec >
    
    < Copy file = "$ {build.dir} / Android" toFile = "$ {android.build.deploy.folder} / $ {VERSION_STRING}. apk" /> 
  </ target >
  
</ Project >